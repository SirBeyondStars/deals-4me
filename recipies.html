<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Deals-4Me · Recipes</title>

  <!-- Shared site styles & header/footer loader -->
  <link rel="stylesheet" href="/theme.css">
  <script defer src="/theme.js"></script>

  <!-- Page-specific styles -->
  <style>
    .wrap{padding:30px 0}
    .filters{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:12px}
    .filters .input{max-width:320px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
    .card{display:block;background:#fff;border:1px solid var(--border);border-radius:16px;overflow:hidden;
          box-shadow:0 8px 20px rgba(0,0,0,.05);transition:transform .08s,box-shadow .08s}
    .card:hover{transform:translateY(-2px);box-shadow:0 12px 28px rgba(0,0,0,.08)}
    .thumb{width:100%;aspect-ratio:16/9;object-fit:cover;background:#eef2f7}
    .body{padding:12px}
    .body h3{margin:0 0 6px;font-size:16px}
    .body p{margin:0;color:var(--muted);font-size:13px}
    .tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px}
    .tag{font-size:12px;border:1px solid var(--border);background:#fafafa;border-radius:999px;padding:3px 8px}
    .empty{color:var(--muted);padding:24px;text-align:center}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .btn--primary{background:var(--nav-pill);color:var(--nav-pill-ink);border:1px solid #1e8c67}
  </style>
</head>
<body>
  <!-- Global dark header injects here -->
  <div id="header"></div>

  <main class="container wrap">
    <section class="hero">
      <h1>Recipes</h1>
      <p class="muted">Simple, budget-friendly meals. Search by name, tag, or time.</p>
    </section>

    <section class="panel">
      <div class="filters">
        <input id="q" class="input" type="search" placeholder="Search recipes… (e.g., pasta, chicken, 20 min)">
        <select id="tag" class="input" style="width:auto">
          <option value="">All tags</option>
          <option>Quick</option>
          <option>Budget</option>
          <option>Family</option>
          <option>Vegetarian</option>
          <option>Freezer</option>
        </select>
        <button class="btn" onclick="clearFilters()">Clear</button>
        <span class="muted" style="margin-left:auto">Phase 3: static list (no backend yet)</span>
      </div>

      <div id="grid" class="grid"></div>
      <div id="empty" class="empty" style="display:none">No recipes match your search.</div>
    </section>
  </main>

  <!-- Global footer injects here -->
  <div id="footer"></div>

  <script>
    // Starter catalog — replace/add items anytime.
    const RECIPES = [
      {
        id: 'sheet-pan-chicken',
        title: 'Sheet-Pan Chicken & Veg',
        thumb: '/img/recipe-sheetpan.jpg',
        desc: 'One pan, less mess. Weeknight lifesaver.',
        minutes: 30,
        tags: ['Quick','Budget','Family'],
        link: '#'
      },
      {
        id: '5-ingredient-pasta',
        title: '5-Ingredient Garlic Pasta',
        thumb: '/img/recipe-pasta.jpg',
        desc: 'Pantry staples, fast and cozy.',
        minutes: 20,
        tags: ['Quick','Budget','Vegetarian'],
        link: '#'
      },
      {
        id: 'taco-skillet',
        title: 'Skillet Tacos (One-Pan)',
        thumb: '/img/recipe-taco.jpg',
        desc: 'Crowd-pleaser with easy cleanup.',
        minutes: 25,
        tags: ['Quick','Family'],
        link: '#'
      },
      {
        id: 'freezer-breakfast-burritos',
        title: 'Freezer Breakfast Burritos',
        thumb: '/img/recipe-burrito.jpg',
        desc: 'Batch once, reheat all week.',
        minutes: 45,
        tags: ['Freezer','Budget','Family'],
        link: '#'
      }
    ];

    const $ = id => document.getElementById(id);

    function render(list){
      const grid = $('grid'), empty = $('empty');
      grid.innerHTML = '';
      if (!list.length){ empty.style.display='block'; return; }
      empty.style.display='none';

      list.forEach(r=>{
        const a = document.createElement('a');
        a.className = 'card';
        a.href = r.link; // later: /recipes/<id>.html
        a.innerHTML = `
          <img class="thumb" src="${escapeHTML(r.thumb || '')}" alt="${escapeHTML(r.title)}">
          <div class="body">
            <h3>${escapeHTML(r.title)}</h3>
            <p>${escapeHTML(r.desc)} · ${r.minutes} min</p>
            <div class="tags">${r.tags.map(t=>`<span class="tag">${escapeHTML(t)}</span>`).join('')}</div>
            <div class="actions"><span class="btn btn--primary">Open</span></div>
          </div>
        `;
        grid.appendChild(a);
      });
    }

    function escapeHTML(s=''){return s.replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]))}

    function filter(){
      const text = $('q').value.trim().toLowerCase();
      const tag = $('tag').value;
      const out = RECIPES.filter(r=>{
        const hay = (r.title+' '+r.desc+' '+r.tags.join(' ')+' '+r.minutes+' min').toLowerCase();
        const matchText = !text || hay.includes(text);
        const matchTag  = !tag || r.tags.includes(tag);
        return matchText && matchTag;
      });
      render(out);
    }

    function clearFilters(){
      $('q').value = '';
      $('tag').value = '';
      filter();
    }

    $('q').addEventListener('input', filter);
    $('tag').addEventListener('change', filter);

    // initial paint
    render(RECIPES);
  </script>
  <script type="module" src="./scripts/logout.js"></script>

</body>
</html>
