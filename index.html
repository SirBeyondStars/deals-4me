<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deals-4Me — Find Deals Near You</title>
  <meta name="description" content="Find local grocery deals, browse weekly flyers, and build your shopping list.">
  <link rel="stylesheet" href="/css/theme.css" />
  <link rel="stylesheet" href="/css/home.css" />
</head>
<body>
  <header>
    <div class="container nav" role="navigation" aria-label="Main">
      <div class="logo">Deals-4Me</div>
      <!-- TODO: Replace with your reusable toolbar from “Ideas” (keep styles in theme.css) -->
      <nav class="row">
        <a class="pill" href="/about.html">About</a>
        <a class="pill" href="/games/index.html">Games Hub</a>
        <a class="pill" href="/login.html">Login</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO: Store Finder -->
    <section class="hero" aria-labelledby="storeFinderTitle">
      <div class="card p1" id="heroCard">
        <h1 id="storeFinderTitle" class="h1">Find Deals Near You</h1>
        <form id="storeFinderForm" class="row" onsubmit="return false" aria-label="Find stores">
          <div>
          <label for="zip" class="muted">ZIP Code</label><br />
          <div class="input-go">
            <input id="zip" inputmode="numeric" pattern="[0-9]{5}" maxlength="5"
             placeholder="02324" aria-label="ZIP Code" class="input zip"/>
           <button class="go-btn" id="goFindStores" type="button" aria-label="Find stores">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
             <path d="M5 12h12M13 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
         </button>
        </div>
        <div id="zipMsg" class="msg" aria-live="polite"></div>
        </div>

        <div>
          <label class="muted">&nbsp;</label><br />
            <button class="btn ghost" id="useLocation" type="button">Use My Location</button>
        </div>

        <div>
          <label for="radius" class="muted">Radius</label><br />
            <select id="radius" aria-label="Search radius" class="input select">
              <option value="5">5 miles</option>
              <option value="10" selected>10 miles</option>
              <option value="20">20 miles</option>
            </select>
          </div>
             <!-- removed the separate “Find Stores” button -->
          </form>

        <div id="storeResults" class="mt1" aria-live="polite"></div>
      </div>
    </section>

    <!-- Saved Stores Card -->
    <section class="mt1" aria-labelledby="savedStoresTitle">
      <div class="card p1">
        <div class="row between center">
          <h2 id="savedStoresTitle" class="h2">Saved Stores</h2>
          <span class="badge" id="primaryBadge">Primary: —</span>
        </div>
        <div id="savedStoresList" class="row mt05" aria-live="polite"></div>
        <div class="row mt075">
          <button id="manageStores" class="btn ghost" type="button">Manage</button>
          <button id="filterPrimary" class="btn secondary" type="button" aria-pressed="false">Show Primary Only</button>
        </div>
      </div>
    </section>

    <!-- Sticky Quick Search (appears after stores & scroll past hero) -->
    <section id="stickySearch" class="sticky-search" aria-label="Quick product search">
      <div class="card p06">
        <label for="quickQuery" class="sr-only">Search products</label>
        <input id="quickQuery" type="search" placeholder="Search products at your saved stores…" class="input full"/>
      </div>
    </section>

    <!-- Flyers + Shopping Tabs -->
    <section class="mt1" aria-label="Flyers and shopping">
      <div class="tabs" role="tablist" aria-label="Content tabs">
        <button class="tab active" role="tab" aria-selected="true" aria-controls="tab-flyers" data-tab="flyers">Flyers</button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="tab-shopping" data-tab="shopping">Shopping List</button>
      </div>

      <div id="tab-flyers" role="tabpanel" style="padding:1rem 0">
        <div id="flyerCarousel" class="empty">Top weekly deals will appear here once you’ve saved stores.</div>
        <div class="row mt075" id="flyerCats">
          <button class="pill" type="button" data-cat="Groceries">Groceries</button>
          <button class="pill" type="button" data-cat="Household">Household</button>
          <button class="pill" type="button" data-cat="Pharmacy">Pharmacy</button>
          <button class="pill" type="button" data-cat="Specials">Specials</button>
        </div>
        <div id="flyerGrid" class="grid mt1" aria-live="polite"></div>
      </div>

      <div id="tab-shopping" role="tabpanel" style="display:none;padding:1rem 0">
        <div class="row between center">
          <h3 class="h3">Your Shopping List</h3>
          <div class="row">
            <button class="btn ghost" id="exportList" type="button">Export</button>
            <button class="btn ghost" id="clearList" type="button">Clear</button>
            <button class="btn" id="printList" type="button">Print</button>
          </div>
        </div>
        <div id="shoppingList" class="grid"></div>
        <div id="shoppingTotals" class="badge mt1">Est. savings: $0.00</div>
      </div>
    </section>

    <!-- Daily / Weekend Specials Banner -->
    <section class="mt1 mb2" aria-label="Weekend flash deals">
      <div class="card p1 row between center">
        <div>
          <strong>Weekend Flash Deals</strong>
          <div class="muted">Fri–Sun • Updated daily</div>
        </div>
        <button class="btn" id="viewFlash" type="button">See Deals</button>
      </div>
    </section>
  </main>

  <footer class="container mb3 muted">
    <div class="mt1">© <span id="year"></span> Deals-4Me • <a href="/privAndTerms.html">Terms & Privacy</a></div>
  </footer>

  <!-- Manage Stores Modal -->
  <dialog id="storesModal" class="modal">
    <form method="dialog" class="modal-box">
      <header class="modal-head">
        <h4>Manage Saved Stores</h4>
        <button value="close" aria-label="Close" class="modal-close">×</button>
      </header>
      <div id="storesListModal" class="modal-body" aria-live="polite"></div>
      <footer class="modal-foot">
        <button class="btn ghost" value="close">Done</button>
      </footer>
    </form>
  </dialog>

  <script src="/js/stores.js" type="module" defer></script>
  <script src="/js/flyers.js" type="module" defer></script>
  <script src="/js/list.js" type="module" defer></script>
  <script src="/js/app.js" type="module" defer></script>
</body>
</html>
