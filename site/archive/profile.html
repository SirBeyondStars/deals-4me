<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="./styles/theme.css">
<link rel="stylesheet" href="./styles/toolbarTheme.css">
</head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Deals-4Me</title>
    <link rel="stylesheet" href="theme.css">
    <style>
        /* Keep page layout consistent */
        .profile-section {
            margin-bottom: 20px;
        }

        .profile-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .profile-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header class="header">
  <div class="header-inner">
    <a class="brand" data-root-href="index.html">Deals-4Me</a>

    <nav class="nav" aria-label="Main">
      <a data-root-href="index.html">Home</a>

      <div class="menu" data-submenu>
        <button class="menu-trigger" aria-haspopup="true" aria-expanded="false">Deals</button>
        <div class="menu-panel" role="menu">
          <a role="menuitem" data-root-href="deals.html">All deals</a>
          <a role="menuitem" data-root-href="flyers.html">Weekly flyers</a>

          <div class="menu" data-submenu>
            <button class="menu-trigger" aria-haspopup="true" aria-expanded="false">Groceries ‚ñ∏</button>
            <div class="menu-panel" role="menu">
              <a role="menuitem" data-root-href="deals.html?cat=produce">Produce</a>
              <a role="menuitem" data-root-href="deals.html?cat=meat">Meat</a>
              <a role="menuitem" data-root-href="deals.html?cat=pantry">Pantry</a>
            </div>
          </div>

          <a role="menuitem" data-root-href="deals.html?cat=household">Household</a>
        </div>
      </div>

      <a data-root-href="recipes.html">Recipes</a>
      <a data-root-href="gamesHub.html">Games</a>

      <div class="menu" data-submenu>
        <button class="menu-trigger" aria-haspopup="true" aria-expanded="false">Research</button>
        <div class="menu-panel" role="menu">
          <a role="menuitem" data-root-href="dashboard.html">Dashboard</a>
          <a role="menuitem" data-root-href="search-deals.html">Search deals</a>
        </div>
      </div>

      <!-- NEW: make Contact easy to find -->
      <a data-root-href="contact.html" class="contact-link">Contact</a>

      <!-- Auth controls: auto-toggled by header-auth.js -->
      <a id="loginLink" data-root-href="auth/login.html">Login</a>
      <button id="logoutBtn" class="logout-btn hidden" type="button">Logout</button>
    </nav>

    <button class="nav-toggle" aria-expanded="false" aria-controls="mobileNav" aria-label="Toggle menu">‚ò∞</button>
  </div>

  <nav id="mobileNav" class="nav-drawer" aria-label="Mobile"></nav>
</header>

<style>
  /* minimal sugar; your theme.css can style these further */
  .contact-link { color:#1a4dd8; font-weight:600; }
  .menu[data-submenu] { position: relative; }
  .menu-panel { display:none; position:absolute; top:100%; left:0; background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:6px 0; box-shadow:0 4px 12px rgba(0,0,0,.06); z-index:50; }
  .menu[data-open="true"] > .menu-panel { display:block; }
  .nav-toggle { background:none; border:1px solid #e5e7eb; border-radius:8px; padding:6px 10px; }
  .nav-drawer { display:none; }
  @media (max-width: 820px){
    .nav { display:none; }
    .nav-drawer { display:block; border-top:1px solid #e5e7eb; }
  }
</style>


    <main>
        <section class="profile-section">
            <label for="fullName">Full name</label>
            <input type="text" id="fullName" placeholder="Your full name">

            <label for="zipCode">ZIP code</label>
            <input type="text" id="zipCode" placeholder="12345">

            <label for="dealRadius">Deal radius</label>
            <select id="dealRadius">
                <option>5 miles</option>
                <option selected>10 miles</option>
                <option>25 miles</option>
                <option>50 miles</option>
            </select>

            <div class="profile-option">
                <input type="checkbox" id="familyLearning">
                <label for="familyLearning">Include me in <strong>Family Learning Center</strong> activities &amp; badges</label>
            </div>

            <div style="margin-top: 15px;">
                <button class="btn btn-primary">Save changes</button>
                <button class="btn btn-secondary">Switch user</button>
            </div>
        </section>

        <section class="saved-items">
            <h2>Your saved items</h2>
            <p>Add items from circulars to track prices and get alerts.</p>
            <p><em>No items yet ‚Äî start saving from the deals page.</em></p>

            <h3>Today's highlights</h3>
            <ul>
                <li>üî• 20% off at Local Grocery Mart</li>
                <li>üõí BOGO Fresh Strawberries</li>
                <li>ü•´ Campbell‚Äôs Soup $0.99/can</li>
            </ul>
        </section>
    </main>

    <footer class="footer">
  <div class="footer-inner">
    <div class="footer-links">
      <a data-root-href="tos.html">Terms of Service</a>
      <a data-root-href="privacy.html">Privacy Policy</a>
      <a data-root-href="contact.html">Contact</a>
    </div>

    <div class="footer-meta">
      ¬© <span id="footerYear"></span> Deals-4Me ‚Äî All rights reserved.
    </div>
  </div>
</footer>

<script>
  // keep the year updated even when loaded as a fragment
  document.getElementById("footerYear").textContent = new Date().getFullYear();
</script>

<style>
  /* minimal styling ‚Äî your theme.css can override/extend */
  .footer { background:#ffffff; border-top:1px solid #e5e7eb; margin-top:48px; }
  .footer-inner {
    max-width:1100px; margin:0 auto; padding:20px 16px;
    display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between;
  }
  .footer-links { display:flex; gap:16px; flex-wrap:wrap; }
  .footer-links a { color:#374151; text-decoration:none; font-size:14px; }
  .footer-links a:hover { color:#1a4dd8; }
  .footer-meta { color:#9ca3af; font-size:12px; }
</style>

    <script>
  const PROFILE_KEY = 'd4m_profile_v1';
  const SAVED_ITEMS_KEY = 'd4m_saved_items_v1';
  const HIGHLIGHTS_CACHE_KEY = 'd4m_highlights_cache_v1';

  function loadJSON(k, f){ try{ const r = localStorage.getItem(k); return r ? JSON.parse(r) : f; } catch { return f; } }
  function saveJSON(k, v){ localStorage.setItem(k, JSON.stringify(v)); }
  function initials(name){ if(!name) return 'U'; const p=name.trim().split(/\s+/).slice(0,2); return p.map(x=>x[0].toUpperCase()).join(''); }

  function renderHeader(){
    const profile = loadJSON(PROFILE_KEY, null);
    const name = profile?.fullName || 'there';
    document.getElementById('welcome').textContent = `Welcome, ${name}!`;
    document.getElementById('avatar').textContent = initials(profile?.fullName || 'User');
    const flc = profile?.flc ? 'On' : 'Off';
    const radius = profile?.dealRadius || '‚Äî';
    const zip = profile?.zipCode || '‚Äî';
    document.getElementById('location').innerHTML =
      `Your location: <strong>${zip}</strong>. Radius: <strong>${radius}</strong>. FLC: <strong>${flc}</strong>`;
  }

  function renderSaved(){
    const list = document.getElementById('savedList');
    const saved = loadJSON(SAVED_ITEMS_KEY, []);
    list.innerHTML = '';
    if (!saved.length){
      list.innerHTML = '<li class="muted">No saved items yet. Add from <a href="deals.html">Deals</a> or <a href="flyers.html">Flyers</a>.</li>';
      return;
    }
    saved.sort((a,b)=>(b.dateSaved||0)-(a.dateSaved||0));
    saved.forEach(it=>{
      const when = it.dateSaved ? new Date(it.dateSaved).toLocaleDateString() : '';
      const li = document.createElement('li');
      li.textContent = `${it.title} ‚Äî ${it.store || ''} ${it.price ? '¬∑ $' + it.price : ''} ${when ? '¬∑ ' + when : ''}`;
      list.appendChild(li);
    });
  }

  function pick(arr,n){ const out=[], copy=[...arr]; while(copy.length && out.length<n){ out.push(copy.splice(Math.floor(Math.random()*copy.length),1)[0]); } return out; }
  function generateHighlights(){
    const pool = [
      {t:'Milk (1 gal)', s:'Local Grocery Mart', p:'2.99'},
      {t:'Bananas (lb)', s:'FreshCo', p:'0.39'},
      {t:'Eggs (dozen)', s:'MarketPlace', p:'1.49'},
      {t:'Ground Beef (lb)', s:'SuperSaver', p:'3.29'},
      {t:'Cheerios (10.8oz)', s:'ValueMart', p:'1.99'},
      {t:'Strawberries (1 lb)', s:'Farmway', p:'2.49'},
      {t:'Yogurt 4-pack', s:'Town Market', p:'1.79'}
    ];
    const picks = pick(pool, 3).map(x=>`<li>‚≠ê ${x.t} ‚Äî ${x.s} ¬∑ $${x.p}</li>`).join('');
    return { html: picks, ts: new Date().toDateString() };
  }
  function renderHighlights(){
    const cache = loadJSON(HIGHLIGHTS_CACHE_KEY, null);
    const today = new Date().toDateString();
    const data = (!cache || cache.ts !== today) ? (()=>{ const g=generateHighlights(); saveJSON(HIGHLIGHTS_CACHE_KEY,g); return g; })() : cache;
    document.getElementById('highlightsList').innerHTML = data.html;
  }

  window.addEventListener('storage', (e)=>{
    if (e.key === SAVED_ITEMS_KEY || e.key === PROFILE_KEY){
      renderHeader(); renderSaved(); renderHighlights();
    }
  });

  document.addEventListener('DOMContentLoaded', ()=>{
    renderHeader(); renderSaved(); renderHighlights();
  });
</script>

<script src='./scripts/site-init.js'></script>

</html>

